import e from"axios";import r from"lodash/omit";import t from"qs";function o(){return(o=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}const a=e=>o({beforeRequest:()=>{},onError:()=>{}},e),s={400:"",401:"请求要求用户的身份认证",402:"保留将来使用",403:"请求被服务端拒绝",404:"请求资源无法找到",405:"请求方法被禁止",406:"服务端无法根据客户端请求的内容特性完成请求",407:"应当使用代理进行授权",408:"请求时间过长",500:"服务端内部错误",501:"服务端不支持请求的功能",502:"无效的响应",503:"超载或系统维护无法处理请求",505:"服务器不支持请求的HTTP协议的版本"};let n=a();const i=e.create({timeout:1e4,withCredentials:!1,responseType:"json",validateStatus:function(e){return e>=200&&e<300},transformRequest:(e,o)=>{let a={};return o["Content-Type"]="application/json",n.beforeRequest(e,o),"formData"===(null==e?void 0:e.bodyType)?(a=t.stringify(r(e,["bodyType"])),o["Content-Type"]="application/x-www-form-urlencoded",a):r(e,["bodyType"])},transformResponse:e=>({msg:e.msg,data:null==e?void 0:e.data,code:null==e?void 0:e.code})});i.interceptors.request.use(e=>e,e=>Promise.reject(e)),i.interceptors.response.use(e=>((e,r)=>{var t;return"200"!==(null==e||null==(t=e.data)?void 0:t.code)?(r.onError&&r.onError(null==e?void 0:e.data),Promise.reject(e)):e})(e,n),e=>((e,r)=>(e&&e.response?r.onError&&r.onError(s[status]):r.onError&&r.onError("服务器无响应"),e))(e,n));const l={get:e=>r=>i({method:"GET",url:e,params:r}).then(e=>Promise.resolve(e.data)).catch(e=>Promise.reject(e)),post:(e,r)=>t=>i({method:"POST",url:e,data:Object.assign({},t,{bodyType:null==r?void 0:r.bodyType})}).then(e=>Promise.resolve(e.data)).catch(e=>Promise.reject(e)),put:e=>r=>i({method:"PUT",url:e,data:r}).then(e=>Promise.resolve(e.data)).catch(e=>Promise.reject(e)),delete:e=>r=>i({method:"DELETE",url:e,params:r}).then(e=>Promise.resolve(e.data)).catch(e=>Promise.reject(e)),patch:e=>r=>i({method:"PATCH",url:e,data:r}).then(e=>Promise.resolve(e.data)).catch(e=>Promise.reject(e))},c=e=>{n=o({},n,e)};export default l;export{c as configure,a as getDefaultConfig,i as instance};
//# sourceMappingURL=index.modern.js.map
